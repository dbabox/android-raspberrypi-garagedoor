android-raspberrypi-garagedoor
==============================

Opening my garage door using wi-fi from my Android to a Raspberry Pi

This was inspired by Brad Fitzpatrick's work (http://brad.livejournal.com/2394220.html) that he started in 2008, and the fact that my Flash2Pass stopped working.

You start the app on your Android phone, and when you drive home and connect to your personal wi-fi network, it asks the Raspberry Pi to open the garage door, so you can drive right in without fiddling with anything.

It uses a Raspberry Pi with the PiFace I/O board and a wi-fi dongle. One of the PiFace relays is used to simulate a garage door pushbutton.

It uses avahi/rendezvous/zeroconf/bonjour/nsd/whatever-the-hell-its-called-today to find the Raspberry-Pi on the network without giving it a static IP address. It advertises the "garagedoor" service.

It uses inetd and a short Python script to avoid the need for a webserver, so it's light on resources. The Pi should be running Raspbian.

To set up the Raspberry Pi: (you'll need to do most of this as root, or use sudo)
1. Install the software packages you need by running
   apt-get install avahi-daemon openbsd-inetd
2. Copy garagedoor.service to /etc/avahi/services
3. Restart the daemon by running
   /etc/init.d/avahi-daemon restart
3. Copy opendoor.py to /usr/local/bin
4. Make it an executable script by running
   chmod a+x opendoor.py
4. Add the inetd entry by running
   update-inetd --add '17000\tstream\ttcp\tnowait\troot\t/usr/local/bin/opendoor.py'
5. The garage door wires should be inserted in the two relay contacts nearest the jumper, and connected to where you need to connect switches on your opener.
6. Install a wi-fi dongle as per the HOWTOs on the 'net. You will most probably need a powered USB hub for it, as most dongles are extremely power-hungry.

You should be able to open the garage door by telnetting to port 17000, typing "OPEN" and hitting enter.
02:43:37 ~/raspberry_pi # telnet garagedoor.local 17000
Trying 192.168.128.20...
Connected to garagedoor.local.
Escape character is '^]'.
OPEN
DONE
Connection closed by foreign host.
02:43:41 ~/raspberry_pi # 

Note that this requires avahi-daemon to be running on your Linux box to resolve "garagedoor.local", but this is usually the case with Debian and Ubuntu.

I intend to add the ability to tell remotely if the garage door is open by using the camera or one of the digital inputs.
